<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Todo List</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #8b5cf6;
        --primary-light: #a78bfa;
        --dark: #0f172a;
        --dark-light: #1e293b;
        --light: #f8fafc;
        --gray: #64748b;
        --gray-light: #94a3b8;
        --danger: #ef4444;
        --success: #22c55e;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #020617;
        color: var(--light);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 2rem;
      }

      .container {
        width: 100%;
        max-width: 600px;
        background-color: var(--dark);
        border-radius: 1rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        padding: 2rem;
        height: fit-content;
        border: 1px solid var(--dark-light);
      }

      h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        background: linear-gradient(
          0deg,
          rgb(104, 73, 255) 0%,
          rgb(255, 0, 149) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        color: transparent;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .date-display {
        color: var(--gray-light);
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
      }

      .input-container {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
      }

      input {
        flex: 1;
        padding: 0.75rem 1rem;
        background-color: var(--dark-light);
        color: var(--light);
        border: 1px solid var(--gray);
        border-radius: 0.5rem;
        font-size: 1rem;
        outline: none;
        transition: all 0.2s;
      }

      input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
      }

      button {
        background-color: var(--primary);
        color: white;
        border: none;
        border-radius: 0.5rem;
        padding: 0 1.5rem;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      button:hover {
        background-color: var(--primary-light);
      }

      button:active {
        transform: scale(0.98);
      }

      .filters {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      .filter-btn {
        background: none;
        color: var(--gray);
        padding: 0.5rem 1rem;
        border: 1px solid var(--gray);
      }

      .filter-btn.active {
        background-color: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .todo-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .todo-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background-color: var(--dark-light);
        border-radius: 0.5rem;
        border: 1px solid var(--gray);
        transition: all 0.2s;
      }

      .todo-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
        border-color: var(--gray-light);
      }

      .todo-item.completed {
        opacity: 0.7;
      }

      .todo-item.completed .todo-text {
        text-decoration: line-through;
        color: var(--gray);
      }

      .checkbox {
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid var(--gray);
        border-radius: 0.25rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        background-color: var(--dark-light);
      }

      .checkbox.checked {
        background-color: var(--success);
        border-color: var(--success);
        color: white;
      }

      .todo-text {
        flex: 1;
        font-size: 1rem;
        color: var(--light);
      }

      .delete-btn {
        color: var(--gray);
        background: none;
        border: none;
        padding: 0.25rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .delete-btn:hover {
        color: var(--danger);
      }

      .stats {
        display: flex;
        justify-content: space-between;
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--gray);
        color: var(--gray);
        font-size: 0.875rem;
      }

      .clear-btn {
        background: none;
        color: var(--danger);
        padding: 0;
        font-size: 0.875rem;
      }

      .empty-state {
        text-align: center;
        padding: 2rem 0;
        color: var(--gray);
      }

      .empty-state i {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--primary-light);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1><i class="fas fa-calendar-day"></i> Daily Tasks</h1>
      <div class="date-display" id="date-display"></div>

      <div class="input-container">
        <input type="text" id="todo-input" placeholder="Add a new task..." />
        <button id="add-btn">Add</button>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="active">Active</button>
        <button class="filter-btn" data-filter="completed">Completed</button>
      </div>

      <div class="todo-list" id="todo-list">
        <div class="empty-state">
          <i class="fas fa-clipboard-list"></i>
          <p>No tasks yet. Add one above!</p>
        </div>
      </div>

      <div class="stats">
        <span id="items-left">0 items left</span>
        <button class="clear-btn" id="clear-completed">Clear completed</button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const todoInput = document.getElementById("todo-input");
        const addBtn = document.getElementById("add-btn");
        const todoList = document.getElementById("todo-list");
        const filterBtns = document.querySelectorAll(".filter-btn");
        const itemsLeft = document.getElementById("items-left");
        const clearCompletedBtn = document.getElementById("clear-completed");
        const dateDisplay = document.getElementById("date-display");

        // Display current date
        const today = new Date();
        dateDisplay.textContent = today.toLocaleDateString("en-US", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        });

        // Check if day has changed
        const lastUpdated = localStorage.getItem("lastUpdated");
        const lastUpdatedDate = lastUpdated ? new Date(lastUpdated) : null;

        // Reset completed tasks if it's a new day
        if (
          !lastUpdatedDate ||
          lastUpdatedDate.getDate() !== today.getDate() ||
          lastUpdatedDate.getMonth() !== today.getMonth() ||
          lastUpdatedDate.getFullYear() !== today.getFullYear()
        ) {
          let todos = JSON.parse(localStorage.getItem("todos")) || [];
          todos = todos.map((todo) => {
            return { ...todo, completed: false };
          });
          localStorage.setItem("todos", JSON.stringify(todos));
        }

        // Update last updated date
        localStorage.setItem("lastUpdated", today.toISOString());

        let todos = JSON.parse(localStorage.getItem("todos")) || [];
        let currentFilter = "all";

        // Render todos
        function renderTodos() {
          const filteredTodos = todos.filter((todo) => {
            if (currentFilter === "all") return true;
            if (currentFilter === "active") return !todo.completed;
            if (currentFilter === "completed") return todo.completed;
          });

          if (filteredTodos.length === 0) {
            todoList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-clipboard-list"></i>
                            <p>${
                              currentFilter === "all"
                                ? "No tasks yet. Add one above!"
                                : currentFilter === "active"
                                ? "No active tasks!"
                                : "No completed tasks!"
                            }</p>
                        </div>
                    `;
          } else {
            todoList.innerHTML = filteredTodos
              .map(
                (todo) => `
                        <div class="todo-item ${
                          todo.completed ? "completed" : ""
                        }" data-id="${todo.id}">
                            <div class="checkbox ${
                              todo.completed ? "checked" : ""
                            }">
                                <i class="fas fa-check" style="font-size: 0.75rem; display: ${
                                  todo.completed ? "block" : "none"
                                }"></i>
                            </div>
                            <div class="todo-text">${todo.text}</div>
                            <button class="delete-btn"><i class="fas fa-trash"></i></button>
                        </div>
                    `
              )
              .join("");
          }

          // Update items left
          const activeTodos = todos.filter((todo) => !todo.completed).length;
          itemsLeft.textContent = `${activeTodos} ${
            activeTodos === 1 ? "task" : "tasks"
          } left`;

          // Save to localStorage
          localStorage.setItem("todos", JSON.stringify(todos));
        }

        // Add new todo
        function addTodo() {
          const text = todoInput.value.trim();
          if (text) {
            todos.push({
              id: Date.now(),
              text,
              completed: false,
            });
            todoInput.value = "";
            renderTodos();
          }
        }

        // Event listeners
        addBtn.addEventListener("click", addTodo);
        todoInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") addTodo();
        });

        todoList.addEventListener("click", (e) => {
          const todoItem = e.target.closest(".todo-item");
          if (!todoItem) return;

          const id = Number(todoItem.dataset.id);
          const todoIndex = todos.findIndex((todo) => todo.id === id);

          // Toggle completed
          if (e.target.closest(".checkbox")) {
            todos[todoIndex].completed = !todos[todoIndex].completed;
            renderTodos();
          }

          // Delete todo
          if (e.target.closest(".delete-btn")) {
            todos.splice(todoIndex, 1);
            renderTodos();
          }
        });

        // Filter todos
        filterBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            filterBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            currentFilter = btn.dataset.filter;
            renderTodos();
          });
        });

        // Clear completed
        clearCompletedBtn.addEventListener("click", () => {
          todos = todos.filter((todo) => !todo.completed);
          renderTodos();
        });

        // Initial render
        renderTodos();
      });
    </script>
  </body>
</html>
